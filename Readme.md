# Scale CLI

## Вас когда-нибудь преследовала навязчивая мысль?

Меня да.

![gif](https://media3.giphy.com/media/LyJ6KPlrFdKnK/giphy.gif?cid=ecf05e478zvj9o29l4dwnfdv3ovherbzieqlzztvyftpb1mf&rid=giphy.gif&ct=g)

_"О чём ты?"_ — недоумевающе спросите Вы.

Вы когда-нибудь работали с svg? Я имею ввиду: вы когда нибудь создавали svg изображения кодом? _~~а не эти ваши там фигмы иллюстраторы и прочие чудеса света.~~_

Если да — то вы вероятно понимаете, как трудно изменять размер svg.

И я говорю не про относительный viewbox с моделями представления контента по типу _preserveAspectRatio_ и подобных чудес жизни.
Я говорю про то, чтобы взять уже имеющуюся svg картинку и увеличить её в 2 или, например, в 3 раза.

## В чём идея?

Моя идея проста как рисунок дикаря: "А что если просто взять все значения и изменить их на какой-то коэффициент (скажем умножить все _цифорки_ что есть в файле на 2)? Получим ли мы желаемый результат?"

Вынашивал я эту мысль довольно долго. В интернете ответ найти не смог, что странно (хотя может я просто плохо искал).

Поэтому решился на эксперимент!

![gif](https://media4.giphy.com/media/B0xn7VjeBCbKr5kkvc/giphy.gif?cid=ecf05e47w1ffbyerzgdkzuqxqlcm06v8fno6icnr6xlutlxk&rid=giphy.gif&ct=g)

И с целью его проведения было создано это cli приложение.

## Но зачем?

Да в интернете навалом различных инструментов, которые способны привести svg к нужному размеру.

Вот например один из тех которыми я постоянно пользуюсь: [iloveimg](https://www.iloveimg.com/ru/resize-image/resize-svg).

Но все они как один подменяют мою прекрасную разметку на какие-то грязные path-ы, на которые даже страшно взглянуть.

Я понимаю, что моя реализация далека от идеала: давайте хотя бы подумаем о том, что в файле могут находиться значения которые мы вот ну никак не желаем менять (например SMIL анимации) или что, например, делать со стилями в блоке `< style>` расположившимися прямо внутри нашего `<svg>`? Просто игнорировать? А если они переопределяют размеры, которые мы как бы то ни было должны скейлить? Получается и за этим тоже следует следить?

![gif](https://media1.giphy.com/media/5eF84YnLF2rVa080uQ/giphy.gif?cid=ecf05e47bnwkbzsj3ma0m5tkcq9p65oj8haef0pq5xhlf4rm&rid=giphy.gif&ct=g)

Нет, это всё действительно сложно.

Но давайте не забывать, что это всего лишь эксперимент...

И мы рассмотрим лишь самый базовый случай, чтобы узнать верна ли моя странная теория или нет.

## Момент разочарования

Идея с самого начала была амбициозной. Я понимал, что ей не суждено сбыться.

![gif](https://media4.giphy.com/media/3o6wrebnKWmvx4ZBio/giphy.gif?cid=ecf05e47yedraofh6jcy00xi2y5z1pcfk2rf8etnchau7de1&rid=giphy.gif&ct=g)

После первого же теста я понял, что в документе _оказывается_ гораздо больше чисел которые нельзя трогать при скейле. Среди них: namespace, различные цвета (заливки, обводки, градиенты), значение ширины обводки и прочие приколы...

## А что с теорией то? не рабочая получается?

Какой-то результат я всё-таки получил! Что, конечно, не может не радовать. Пришлось вручную подправить namespace, картинка потеряла свои цвета, но приобрела нужные пропорции!!!

![gif](https://media4.giphy.com/media/l4JySAWfMaY7w88sU/giphy.gif?cid=ecf05e47wnkyu955dtpvyfr4auryupwsigy33o4pb0cyvi19&rid=giphy.gif&ct=g)

Теория всё-таки оказалась верна, осталось лишь довести её до ума...  
И прописать все ignore-кейсы...

Но это как-нибудь в другой раз...

А пока что можете посмотреть на моего бедного экспериментуемого

## SiWi

Знакомьтесь, это SiWi:

[![SiWi](/for-readme/SiWi.svg)](https://codepen.io/daniilboyarinkov/pen/abGqLpx?editors=1000)

И ко мне на эксперимент он пришел вот в таком виде:

Размеры 100x100 если что

![siwi_before](/for-readme/siwi_before.jpg)

После первого "сырого" теста он приобрел нужные размеры, но стал выглядеть вот так:

![siwi_after](/for-readme/siwi_after.jpg)

Тут размеры уже 200x200

Смотрится конечно грустно, но это всё во благо науки _(я надеюсь)_

## Bit of doc

На вход cli принимает путь до файла и коэффициент. Программа изменяет все численные значения в файле на указанный коэффициент и возвращает новый файл с измененными значениями.

## Как проверить работает ли это вообще?

1. Клонируем репозиторий

```console
git clone https://github.com/daniilboyarinkov/scale-cli.git
```

2. Устанавливаем зависимости

```console
npm install
```

3. Собираем проект

```console
npm run build
```

4. Тестируем!-

```console
scale-cli scale <ваш чудесный файл>
```

## Формат ввода

-c, --coefficient — коэффициент изменения (любое численное значение)

-o, --output — кастомный путь куда будет записан результат

```console
scale-cli scale input.svg -c 2 -o output.svg
```

или:

```console
scale-cli scale input.svg --coefficient 1.1 --output output.svg
```
